import{_ as s,M as e,p as t,q as p,N as i,R as n,t as c,a1 as o}from"./framework-c8e009f3.js";const u={},l=n("h1",{id:"多媒体-media",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#多媒体-media","aria-hidden":"true"},"#"),c(" 多媒体-media")],-1),d=o(`<p>media 模块提供多媒体编程的支持。目前仅支持音乐播放和媒体文件扫描。后续会结合 UI 加入视频播放等功能。</p><p>需要注意是，使用该模块播放音乐时是在后台异步播放的，在脚本结束后会自动结束播放，因此可能需要插入诸如<code>sleep()</code>的语句来使脚本保持运行。例如：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//播放音乐</span>
media<span class="token punctuation">.</span><span class="token function">playMusic</span><span class="token punctuation">(</span><span class="token string">&quot;/sdcard/1.mp3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//让音乐播放完</span>
<span class="token function">sleep</span><span class="token punctuation">(</span>media<span class="token punctuation">.</span><span class="token function">getMusicDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="media-scanfile-path" tabindex="-1"><a class="header-anchor" href="#media-scanfile-path" aria-hidden="true">#</a> media.scanFile(path)</h2><ul><li><code>path</code> {string} 媒体文件路径</li></ul><p>扫描路径 path 的媒体文件，将它加入媒体库中；或者该文件已经被删除，则通知媒体库移除该文件。</p><p>媒体库包括相册、音乐库等，因此该函数可以用于把某个图片文件加入相册。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//请求截图</span>
<span class="token function">requestScreenCapture</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//截图</span>
<span class="token keyword">var</span> im <span class="token operator">=</span> <span class="token function">captureScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token string">&quot;/sdcard/screenshot.png&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//保存图片</span>
im<span class="token punctuation">.</span><span class="token function">saveTo</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//把图片加入相册</span>
media<span class="token punctuation">.</span><span class="token function">scanFile</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="media-playmusic-path-volume-looping" tabindex="-1"><a class="header-anchor" href="#media-playmusic-path-volume-looping" aria-hidden="true">#</a> media.playMusic(path[, volume, looping])</h2><ul><li><code>path</code> {string} 音乐文件路径</li><li><code>volume</code> {number} 播放音量，为 0~1 的浮点数，默认为 1</li><li><code>looping</code> {boolean} 是否循环播放，如果 looping 为<code>true</code>则循环播放，默认为<code>false</code></li></ul><p>播放音乐文件 path。该函数不会显示任何音乐播放界面。如果文件不存在或者文件不是受支持的音乐格式，则抛出<code>UncheckedIOException</code>异常。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//播放音乐</span>
media<span class="token punctuation">.</span><span class="token function">playMusic</span><span class="token punctuation">(</span><span class="token string">&quot;/sdcard/1.mp3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//让音乐播放完</span>
<span class="token function">sleep</span><span class="token punctuation">(</span>media<span class="token punctuation">.</span><span class="token function">getMusicDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果要循环播放音乐，则使用 looping 参数：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//传递第三个参数为true以循环播放音乐</span>
media<span class="token punctuation">.</span><span class="token function">playMusic</span><span class="token punctuation">(</span><span class="token string">&quot;/sdcard/1.mp3&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//等待三次播放的时间</span>
<span class="token function">sleep</span><span class="token punctuation">(</span>media<span class="token punctuation">.</span><span class="token function">getMusicDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果要使用音乐播放器播放音乐，调用<code>app.viewFile(path)</code>函数。</p><h2 id="media-musicseekto-msec" tabindex="-1"><a class="header-anchor" href="#media-musicseekto-msec" aria-hidden="true">#</a> media.musicSeekTo(msec)</h2><ul><li><code>msec</code> {number} 毫秒数，表示音乐进度</li></ul><p>把当前播放进度调整到时间 msec 的位置。如果当前没有在播放音乐，则调用函数没有任何效果。</p><p>例如:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//播放音乐</span>
media<span class="token punctuation">.</span><span class="token function">playMusic</span><span class="token punctuation">(</span><span class="token string">&quot;/sdcard/1.mp3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//调整到30秒的位置</span>
media<span class="token punctuation">.</span><span class="token function">musicSeekTo</span><span class="token punctuation">(</span><span class="token number">30</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//等待音乐播放完成</span>
<span class="token function">sleep</span><span class="token punctuation">(</span>media<span class="token punctuation">.</span><span class="token function">getMusicDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">30</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="media-pausemusic" tabindex="-1"><a class="header-anchor" href="#media-pausemusic" aria-hidden="true">#</a> media.pauseMusic()</h2><p>暂停音乐播放。如果当前没有在播放音乐，则调用函数没有任何效果。</p><h2 id="media-resumemusic" tabindex="-1"><a class="header-anchor" href="#media-resumemusic" aria-hidden="true">#</a> media.resumeMusic()</h2><p>继续音乐播放。如果当前没有播放过音乐，则调用该函数没有任何效果。</p><h2 id="media-stopmusic" tabindex="-1"><a class="header-anchor" href="#media-stopmusic" aria-hidden="true">#</a> media.stopMusic()</h2><p>停止音乐播放。如果当前没有在播放音乐，则调用函数没有任何效果。</p><h2 id="media-ismusicplaying" tabindex="-1"><a class="header-anchor" href="#media-ismusicplaying" aria-hidden="true">#</a> media.isMusicPlaying()</h2><ul><li><code>return</code> {boolean}</li></ul><p>返回当前是否正在播放音乐。</p><h2 id="media-getmusicduration" tabindex="-1"><a class="header-anchor" href="#media-getmusicduration" aria-hidden="true">#</a> media.getMusicDuration()</h2><ul><li><code>return</code> {number}</li></ul><p>返回当前音乐的时长。单位毫秒。</p><h2 id="media-getmusiccurrentposition" tabindex="-1"><a class="header-anchor" href="#media-getmusiccurrentposition" aria-hidden="true">#</a> media.getMusicCurrentPosition()</h2><ul><li><code>return</code> {number}</li></ul><p>返回当前音乐的播放进度(已经播放的时间)，单位毫秒。</p>`,35);function r(m,k){const a=e("Badge");return t(),p("div",null,[l,i(a,{type:"tip",text:"稳定",vertical:"middle"}),d])}const h=s(u,[["render",r],["__file","media.html.vue"]]);export{h as default};
