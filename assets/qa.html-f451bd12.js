import{_ as t,M as p,p as e,q as o,R as s,t as n,N as c,a1 as i}from"./framework-c8e009f3.js";const u={},l=i(`<h1 id="q-a" tabindex="-1"><a class="header-anchor" href="#q-a" aria-hidden="true">#</a> Q &amp; A</h1><h2 id="如何定时运行脚本" tabindex="-1"><a class="header-anchor" href="#如何定时运行脚本" aria-hidden="true">#</a> 如何定时运行脚本</h2><p>点击脚本右边的菜单按钮-&gt;更多-&gt;定时任务即可定时运行脚本，但是必须保持 Auto.js 后台运行(自启动白名单、电源管理白名单等)。同时，可以在脚本的开头使用<code>device.wakeUp()</code>来唤醒屏幕；但是，Auto.js 没有解锁屏幕的功能，因此难以在有锁屏密码的设备上达到效果。</p><h2 id="定时任务如何获取外部参数" tabindex="-1"><a class="header-anchor" href="#定时任务如何获取外部参数" aria-hidden="true">#</a> 定时任务如何获取外部参数</h2><p>如果一个脚本是用 intent&quot;启动&quot;的，比如定时任务中的特定事件（网络状态变化等）触发而启动的，则可以通过<code>engines.myEngine().execArgv.intent</code>获取启动的 intent，从而获取外部参数。</p><h2 id="如何把图片和脚本一起打包-或者打包多个脚本" tabindex="-1"><a class="header-anchor" href="#如何把图片和脚本一起打包-或者打包多个脚本" aria-hidden="true">#</a> 如何把图片和脚本一起打包，或者打包多个脚本</h2><p>如果除了单脚本以外还有其他脚本、图片、音乐等资源一起打包，则需要使用项目功能。</p><p>点击 Auto.js 的&quot;+&quot;号，选择项目，填写项目名称、包名等信息以后，点击&quot;√&quot;即可新建一个项目。可以在项目中放多个脚本、模块、资源文件，点击项目工具栏的 apk 打包图标即可打包一个项目，点击工具栏可以重新配置项目。</p><p>例如，主脚本要读取同一文件夹下的图片 1.png，再执行找图，则可以通过<code>images.read(&quot;./1.png&quot;)</code>来读取，其中&quot;./1.png&quot;表示同一目录 1.png 图片；ui 中的图片控件要引用同一文件夹的 2.png 图片则为<code>&lt;img src=&quot;file://2.png&quot;/&gt;</code>。Auto.js 内置的函数和模块都支持相对路径，但是，其他情况则需要使用<code>files.path()</code>函数来把相对路径转换为绝对路径。</p><h2 id="如何使打包的应用不显示主界面" tabindex="-1"><a class="header-anchor" href="#如何使打包的应用不显示主界面" aria-hidden="true">#</a> 如何使打包的应用不显示主界面</h2><p>需要使用项目功能。新建项目后，修改项目下的<code>project.json</code>文件，增加以下条目：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;launchConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hideLogs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>例如：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;项目名称&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;versionName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;versionCode&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;packageName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;org.autojs.example&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;main.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;launchConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hideLogs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>&quot;launchConfig&quot;表示启动配置，&quot;hideLogs&quot;表示隐藏日志。</p><p>参见项目与项目配置。</p><h2 id="auto-js-自带的模块和函数中没有的功能如何实现" tabindex="-1"><a class="header-anchor" href="#auto-js-自带的模块和函数中没有的功能如何实现" aria-hidden="true">#</a> Auto.js 自带的模块和函数中没有的功能如何实现</h2><p>由于 Auto.js 支持直接调用 Android 的 API，对于 Auto.js 没有内置的函数，可以直接通过修改 Android 代码为 JavaScript 代码实现。例如旋转图片的 Android 代码为：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Bitmap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span></span><span class="token class-name">Matrix</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Bitmap</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Bitmap</span> src<span class="token punctuation">,</span><span class="token keyword">final</span> <span class="token keyword">int</span> degrees<span class="token punctuation">,</span><span class="token keyword">final</span> <span class="token keyword">float</span> px<span class="token punctuation">,</span><span class="token keyword">final</span> <span class="token keyword">float</span> py<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>degrees <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> src<span class="token punctuation">;</span>
    <span class="token class-name">Matrix</span> matrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    matrix<span class="token punctuation">.</span><span class="token function">setRotate</span><span class="token punctuation">(</span>degrees<span class="token punctuation">,</span> px<span class="token punctuation">,</span> py<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Bitmap</span> ret <span class="token operator">=</span> <span class="token class-name">Bitmap</span><span class="token punctuation">.</span><span class="token function">createBitmap</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>转换为 JavaScript 的代码后为：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">importClass</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>Bitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">importClass</span><span class="token punctuation">(</span>android<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>Matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token parameter">src<span class="token punctuation">,</span> degrees<span class="token punctuation">,</span> px<span class="token punctuation">,</span> py</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>degrees <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> src<span class="token punctuation">;</span>
	<span class="token keyword">var</span> matrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Matrix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	matrix<span class="token punctuation">.</span><span class="token function">setRotate</span><span class="token punctuation">(</span>degrees<span class="token punctuation">,</span> px<span class="token punctuation">,</span> py<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> ret <span class="token operator">=</span> Bitmap<span class="token punctuation">.</span><span class="token function">createBitmap</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> src<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> ret
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21),r={href:"/workWithJava",target:"_blank",rel:"noopener noreferrer"};function k(d,m){const a=p("ExternalLinkIcon");return e(),o("div",null,[l,s("p",null,[n("有关调用 Android 和 Java 的 API 的更多信息，参见 "),s("a",r,[n("Work with Java"),c(a)]),n("。")])])}const h=t(u,[["render",k],["__file","qa.html.vue"]]);export{h as default};
